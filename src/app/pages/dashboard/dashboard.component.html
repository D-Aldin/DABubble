
  <app-header></app-header>

<section>
<div class="dashboard-wrapper">
  <!-- Sidenav -->
  @if (showSidenav) {
    <app-sidenav class="sidenav" (openAddChannelDialog)="openAddChannelDialog()"></app-sidenav>
  }

  <!-- Main content container -->
  <div class="main-container" [class.expanded]="!showSidenav">

    <!-- Toggle Button  -->
    <button class="sidenav-toggle-btn" (click)="toggleSidenav()" (mouseenter)="hovered = true" (mouseleave)="hovered = false">
      <div class="btn-content" [class.hover-blue]="hovered">
        @if (showSidenav) {
          <div class="icon-box">
            <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
              <path d="M6 4l4 4-4 4" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <span class="label">Workspace-Menü schließen</span>
        } @else {
          <div class="icon-box">
            <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 16 16" fill="currentColor">
              <path d="M10 12L6 8l4-4" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <span class="label">Workspace-Menü öffnen</span>
        }
      </div>
    </button>
    
    <!-- Add-Channel-Dialog & Add-People-dialog-->
    @if (showAddChannelDialog) {
      <div class="overlay" (click)="closeAddChannelDialog()">
        <div class="dialog-container" (click)="$event.stopPropagation()">
          <app-add-channel 
            (close)="closeAddChannelDialog()" 
            (openAddPeopleDialog)="openAddPeopleDialog()">
          </app-add-channel>
        </div>
      </div>
    }
    @if (showPeopleDialog) {
      <div class="overlay" (click)="closePeopleDialog()">
        <div class="dialog-container" (click)="$event.stopPropagation()">
          <app-add-people
            [channelName]="createdChannelName"
            (cancel)="closePeopleDialog()"
            (confirm)="handlePeopleConfirmed($event)">
          </app-add-people>
        </div>
      </div>
    }


    <!--Dashboard Main Content -->
    <div class="main-content">
      <h1>Dashboard</h1>
      <router-outlet></router-outlet>
      <app-message-field></app-message-field>
      
    </div>
      
  </div>



  <!--Dashboard Thread Content -->
  <app-thread>
    @for (item of chatMessages; track $index) {
      <app-chat-box [src]="item.src" [userName]="item.userName" [time]="item.time" [message]="item.message" [userMe]="item.userMe">></app-chat-box>
    }
  </app-thread>
  
</div>
</section>

